(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(11),c=n.n(a),s=n(9),o=n(77),i=n(7),u=n.n(i),l=n(14),d=n(21),j=n.n(d),b="/api/tasks",h=null,p={setToken:function(e){h="bearer ".concat(e)},getAll:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h}},e.next=3,j.a.get(b,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:h}},e.next=3,j.a.post("".concat(b,"/").concat(t),n,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),update:function(e,t){var n={headers:{Authorization:h}};return j.a.put("".concat(b,"/").concat(e),t,n).then((function(e){return e.data}))},deleteOne:function(e){var t={headers:{Authorization:h}};return j.a.delete("".concat(b,"/").concat(e),t).data},addUser:function(e,t){var n={headers:{Authorization:h}};return j.a.put("".concat(b,"/").concat(e,"/").concat(t),n)}},f="/api/users",O=null,v=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,j.a.get(f,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,j.a.get("".concat(f,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:O}},e.next=3,j.a.put("".concat(f,"/").concat(t),n,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g={setToken:function(e){O="bearer ".concat(e)},getAll:v,getByUsername:x,deleteUser:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,j.a.delete("".concat(f,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:m},w=n(161),k=n(165),y=n(166),S=n(2),C=function(e){var t=e.user,n=e.logOut;return Object(S.jsx)("div",{children:Object(S.jsx)(w.a,{children:Object(S.jsxs)(k.a,{children:[Object(S.jsx)("h3",{children:t.name}),Object(S.jsx)(y.a,{onClick:n,children:"log out"})]})})})},A=n(174),T=n(167),U=n(168),D=n(169),N=n(172),W=n(175),E=n(170),B=function(e){var t=e.selectedUser,n=Object(r.useState)(""),a=Object(s.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)(""),d=Object(s.a)(i,2),j=d[0],b=d[1],h=Object(r.useState)(t.isAdmin),p=Object(s.a)(h,2),f=p[0],O=p[1],v=Object(r.useState)(!1),x=Object(s.a)(v,2),m=x[0],w=x[1],k=function(){w(!1),o(""),b("")},C=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w(!1),!window.confirm("Delete user ".concat(r," ?"))){e.next=7;break}return e.next=5,g.deleteUser(n);case 5:window.alert("Deleted successfully, refreshing page to see changes"),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),w(!1),e.prev=2,r={name:c||t.name,breed:j||t.breed,isAdmin:f},e.next=6,g.update(t.id,r);case 6:O(t.isAdmin),console.log(f),window.alert("Updated successfully, refreshing page to see changes"),window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:[Object(S.jsx)(y.a,{onClick:function(){w(!0)},children:"Edit"}),Object(S.jsxs)(A.a,{open:m,close:k,fullWidth:!0,scroll:"paper",children:[Object(S.jsxs)(T.a,{children:["Edit user '",t.name,"'"]}),Object(S.jsx)(U.a,{children:Object(S.jsxs)(D.a,{children:[Object(S.jsx)(N.a,{variant:"outlined",fullWidth:!0,name:"Name",label:"Name",value:c,onChange:function(e){var t=e.target;return o(t.value)}}),Object(S.jsx)(N.a,{variant:"outlined",fullWidth:!0,name:"Breed",label:"Breed",value:j,onChange:function(e){var t=e.target;return b(t.value)}}),Object(S.jsxs)("div",{children:["Admin \xa0",Object(S.jsx)(W.a,{checked:f,onChange:function(){O((function(e){return!e}))},color:"primary"})]})]})}),Object(S.jsxs)(E.a,{children:[Object(S.jsx)(y.a,{onClick:B,children:"update"}),Object(S.jsx)(y.a,{onClick:function(e){return C(e,t.id,t.username)},children:"delete"}),Object(S.jsx)(y.a,{onClick:k,children:"Cancel"})]})]})]})},z=n(54),q=function(e){var t=e.options,n=Object(r.useState)(""),a=Object(s.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)(""),d=Object(s.a)(i,2),j=d[0],b=d[1],h=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("creating new task"),e.prev=2,n=j.value,r={item:c},e.next=7,p.create(n.id,r);case 7:o(""),b(""),window.alert("Created new task successfully, refreshing page to see changes"),window.location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("form",{onSubmit:h,children:[Object(S.jsx)(N.a,{variant:"outlined",margin:"normal",fullWidth:!0,multiline:!0,label:"Task",name:"task",value:c,onChange:function(e){var t=e.target;o(t.value)}}),Object(S.jsxs)("div",{className:"select-box",children:["assign to \xa0",Object(S.jsx)(z.a,{onChange:b,options:t,className:"select"})," \xa0",Object(S.jsx)(y.a,{type:"submit",children:"assign"})]})]})},L=function(e){var t=e.task,n=e.options,a=Object(r.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1],d=Object(r.useState)(""),j=Object(s.a)(d,2),b=j[0],h=j[1],f=Object(r.useState)(!1),O=Object(s.a)(f,2),v=O[0],x=O[1],m=function(){x(!1),h("")},g=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!window.confirm("Delete task ".concat(r," ?"))){e.next=7;break}return e.next=4,p.deleteOne(n);case 4:x(!1),window.alert("Deleted successfully, refreshing page to see changes"),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("updating task"),e.next=4,p.update(t.id,{item:b});case 4:h(""),x(!1),window.alert("Updated task successfully, refreshing page to see changes"),window.location.reload();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("adding ".concat(o.label," to task")),r=o.value.id,e.next=5,p.addUser(n,r);case 5:window.alert("Added user successfully, refreshing page to see changes"),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:["\u270f\ufe0f ",t.item," \xa0",Object(S.jsx)(y.a,{onClick:function(){x(!0)},children:"Edit"}),Object(S.jsxs)(A.a,{open:v,close:m,fullWidth:!0,scroll:"paper",children:[Object(S.jsxs)(T.a,{children:["Edit task '",t.item,"'"]}),Object(S.jsxs)(U.a,{children:[Object(S.jsxs)(D.a,{children:["Enter new task in the box and hit UPDATE ",Object(S.jsx)("br",{}),"DELETE to delete task and associated users ",Object(S.jsx)("br",{}),"CANCEL to quit editing"]}),Object(S.jsx)(N.a,{multiline:!0,fullWidth:!0,variant:"outlined",name:"Task",value:b,onChange:function(e){var t=e.target;h(t.value)}})]}),Object(S.jsxs)(E.a,{children:[Object(S.jsx)(y.a,{onClick:w,children:"update"}),Object(S.jsx)(y.a,{onClick:function(e){return g(e,t.id,t.item)},children:"delete"}),Object(S.jsx)(y.a,{onClick:m,children:"Cancel"})]})]}),Object(S.jsxs)("div",{className:"select-box",children:["assign to \xa0",Object(S.jsx)(z.a,{onChange:i,options:n,className:"select"})," \xa0",Object(S.jsx)(y.a,{onClick:function(e){return k(e,t.id)},children:"add"})]}),t.Author.map((function(e){return Object(S.jsxs)("div",{children:["\ud83d\udc36 ",e.name]},e.id)})),Object(S.jsx)("br",{})]})},I=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),o=Object(s.a)(c,2),i=o[0],u=o[1],l=[];return Object(r.useEffect)((function(){p.getAll().then((function(e){u(e)})),g.getAll().then((function(e){a(e)}))}),[]),n.map((function(e){l.push({value:e,label:"".concat(e.name," (").concat(e.username,")")})})),i?Object(S.jsxs)("div",{className:"page-box",children:[Object(S.jsx)("h1",{children:"Welcome to MiDoggo"}),Object(S.jsx)("h2",{children:"Task Board"}),i.map((function(e){return Object(S.jsx)(L,{task:e,options:l},e.id)})),Object(S.jsx)("h2",{children:"Create Task"}),Object(S.jsx)(q,{options:l}),Object(S.jsx)("h2",{children:"User Board"}),n.map((function(e){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("p",{children:["Name: ",e.name," ",Object(S.jsx)("br",{}),"Username: ",e.username," ",Object(S.jsx)("br",{}),"Breed: ",e.breed," ",Object(S.jsx)("br",{}),"Admin: ",e.isAdmin.toString()," ",Object(S.jsx)("br",{})]},e.id),Object(S.jsx)(B,{selectedUser:e})," ",Object(S.jsx)("br",{})]})}))]}):null},J=function(e){var t=e.task;return Object(S.jsxs)("div",{children:["\u270f\ufe0f ",t.item]})},P=function(e){var t=e.user,n=Object(r.useState)("Welcome to general task board"),a=Object(s.a)(n,2),c=a[0],o=(a[1],Object(r.useState)([])),i=Object(s.a)(o,2),u=i[0],l=i[1];return Object(r.useEffect)((function(){l(t.ToDo)}),[l,t.ToDo]),Object(S.jsxs)("div",{className:"center-screen",children:[Object(S.jsx)("h2",{children:"Task Board"}),Object(S.jsx)("h3",{children:c}),u.map((function(e){return Object(S.jsx)(J,{task:e},e.id)}))]})},R={login:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/register",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},M=n(37),F=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(s.a)(c,2),i=o[0],d=o[1],j=Object(r.useState)("Create an account to start using app"),b=Object(s.a)(j,2),h=b[0],p=b[1],f=Object(r.useState)(""),O=Object(s.a)(f,2),v=O[0],x=O[1],m=Object(r.useState)(""),g=Object(s.a)(m,2),w=g[0],k=g[1],C=Object(r.useState)(""),A=Object(s.a)(C,2),T=A[0],U=A[1],D=Object(r.useState)(""),W=Object(s.a)(D,2),E=W[0],B=W[1],z="length from 2-20 characters and must be unique",q="must be greater than 3 characters",L=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={username:v,password:w,name:T,breed:E},e.next=5,R.register(n);case 5:p("Register successfully"),x(""),k(""),U(""),B(""),e.next=19;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("invalid username or password"),a(!0),p("Try again"),d("invalid username or password"),setTimeout((function(){a(!1)}),3e3);case 19:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"register-box",children:[Object(S.jsx)("h1",{children:"Register"}),Object(S.jsx)("h4",{children:h}),Object(S.jsxs)("form",{onSubmit:L,children:[Object(S.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Username",name:"username",error:n,helperText:n?i:z,value:v,onChange:function(e){var t=e.target;return x(t.value)}}),Object(S.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",name:"password",error:n,helperText:n?i:q,value:w,onChange:function(e){var t=e.target;return k(t.value)}}),Object(S.jsx)(N.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Name",name:"name",value:T,onChange:function(e){var t=e.target;return U(t.value)}}),Object(S.jsx)(N.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Breed",name:"breed",value:E,onChange:function(e){var t=e.target;return B(t.value)}}),Object(S.jsx)(y.a,{type:"submit",fullWidth:!0,className:"register-button",variant:"contained",color:"primary",children:"Register"})]}),Object(S.jsx)(M.b,{to:"/login",className:"register-link",children:"Continue to log in"})]})},G=n(15),H=function(e){var t=e.setUser,n=Object(r.useState)(!1),a=Object(s.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)(""),d=Object(s.a)(i,2),j=d[0],b=d[1],h=Object(r.useState)(""),f=Object(s.a)(h,2),O=f[0],v=f[1],x=Object(r.useState)(""),m=Object(s.a)(x,2),w=m[0],k=m[1],C=Object(G.f)(),A=function(){var e=Object(l.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,R.login({username:O,password:w});case 4:r=e.sent,window.localStorage.setItem("loggedAppUser",JSON.stringify(r)),p.setToken(r.token),g.setToken(r.token),g.getByUsername(r.username).then((function(e){t(e)})),v(""),k(""),C.push("".concat(O)),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("invalid username or password"),o(!0),b("invalid username or password"),setTimeout((function(){o(!1)}),3e3);case 20:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"register-box",children:[Object(S.jsx)("h1",{children:"Log in"}),Object(S.jsxs)("form",{onSubmit:A,children:[Object(S.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Username",name:"username",error:c,helperText:c?j:"",value:O,onChange:function(e){var t=e.target;return v(t.value)}}),Object(S.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",name:"password",error:c,helperText:c?j:"",value:w,onChange:function(e){var t=e.target;return k(t.value)}}),Object(S.jsx)(y.a,{type:"submit",fullWidth:!0,className:"register-button",variant:"contained",color:"primary",children:"Login"})]}),Object(S.jsx)(M.b,{to:"/register",className:"register-link",children:"Don't have an account? Register here"})]})};var K=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(G.f)(),i=!1;Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedAppUser");if(e){var t=JSON.parse(e),n=Object(o.a)(t.token,{complete:!0}),r=new Date;1e3*n.exp<r.getTime()&&(i=!0,window.alert("Token expired, please log out"),u()),i||(p.setToken(t.token),g.setToken(t.token),g.getByUsername(t.username).then((function(e){a(e)})),c.push("".concat(t.username)))}else c.push("/login")}),[c]);var u=function(){(window.confirm("Log out?")||i)&&(window.localStorage.removeItem("loggedAppUser"),window.localStorage.clear(),c.push("/login"),window.location.reload())};return n?n.isAdmin?Object(S.jsxs)(G.a,{path:"/:username",children:[Object(S.jsx)(C,{user:n,logOut:u}),Object(S.jsx)(I,{})]}):Object(S.jsxs)(G.a,{path:"/:username",children:[Object(S.jsx)(C,{user:n,logOut:u}),Object(S.jsx)(P,{user:n})]}):Object(S.jsxs)("div",{children:[Object(S.jsx)(G.c,{children:Object(S.jsx)(G.a,{path:"/login",children:Object(S.jsx)(H,{setUser:a})})}),Object(S.jsx)(G.c,{children:Object(S.jsx)(G.a,{path:"/register",children:Object(S.jsx)(F,{})})})]})},Q=n(171),V=n(81),X=n(56),Y=n(55),Z=Object(V.a)({palette:{primary:X.a,error:Y.a},overrides:{MuiToolbar:{root:{justifyContent:"space-between"},regular:{backgroundColor:X.a[300]}},MuiButton:{root:{color:"#392515"},containedPrimary:{color:X.a[50]}}}});n(130);c.a.render(Object(S.jsx)(M.a,{children:Object(S.jsx)(Q.a,{theme:Z,children:Object(S.jsx)(K,{})})}),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.ea920e05.chunk.js.map